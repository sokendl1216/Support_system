# 仕様書（詳細設計書）

## 1. システム名
多様なニーズを持つ方の仕事支援AIシステム

## 2. システムの概要
このシステムは、パソコンやAIの知識がない方や、入力や操作が苦手な方でも、簡単な操作で「プログラム」や「ホームページ」などの仕事を自分で作成できるように支援するものです。主にボタン選択を中心とした分かりやすい画面構成と、やさしい日本語によるガイドで、誰でも迷わず使えることを目指しています。

## 3. 画面・機能一覧

### 3.1 トップ画面
- システムの簡単な説明を表示します。
- 「なにを作りますか？」という質問と、以下の選択肢ボタンを表示します。
  - プログラムを作る
  - ホームページを作る
- AIエージェントの進行モードを選択できるボタンを表示します：
  - 「全自動型進行モード」：最小限の入力で自動的に進行
  - 「対話型進行モード」：ユーザーと対話しながら一緒に進める

### 3.2 目的選択画面
- 「どんなものを作りますか？」という質問と、いくつかの選択肢ボタン、自由入力欄を表示します。
- 例：画像分類、データ整理、お店紹介ページ、自由記述

### 3.3 入力画面
- AIが「何が必要ですか？」と質問し、必要な情報を入力または選択できるようにします。
- 画像やファイル（jpg/png/pdf/csvなど）をアップロードできます。
- 入力内容を確認する画面も用意します。
- 「全自動型進行モード」の場合は、最小限の質問で残りの情報をAIが推論します。
- 「対話型進行モード」の場合は、詳細な質問と回答を通じて情報を収集します。

### 3.4 プレビュー・修正画面
- AIが自動生成した内容（プログラムやホームページ）をプレビュー表示します。
- 「修正する」「やり直す」「OK」などのボタンで、修正や再生成の指示ができます。
- 修正内容はボタン選択または入力欄で伝えられます。
- 「全自動型進行モード」では、修正指示後に自動的に必要な対応が実行されます。
- 「対話型進行モード」では、修正のためのより詳細な対話が行われます。

### 3.5 出力・保存画面
- 完成したプログラムやホームページをダウンロードしたり、公開リンクを作成したりできます。
- 出力形式はHTML/CSS/JS、Pythonコード、ZIPファイルなどです。

## 4. 入力・出力仕様
- 画面や説明文は分かりやすい日本語で記載します。
- 基本はボタン選択ですが、必要に応じてテキスト入力も可能です。
- 画像やファイルはjpg/png/pdf/csvなどに対応します。
- 出力はHTML/CSS/JS、Pythonコード、ZIPファイルなどで提供します。

## 5. アクセシビリティ・配慮事項
- 音声入力や読み上げ（Vosk、Espeak）に対応します。
- 色覚や視覚に配慮した配色、フォントサイズの調整が可能です。
- 操作ミス時には分かりやすいエラーメッセージを表示します。

## 6. AIエージェント進行モード

### 6.1 全自動型進行モード（Auto-GPT的アプローチ）
- 目標設定のみで一連の処理を自動的に実行
- 最小限のユーザー入力で最大限の結果を生成
- 自己修正能力と自律的なフィードバックループ
- 進捗状況をリアルタイムで表示
- 主要な意思決定ポイントでのみユーザー確認
- 自動的な中間結果評価と方向修正
- ユースケース：操作に不慣れなユーザー、迅速な制作が必要な場合

### 6.2 対話型進行モード（LangChainベースのアプローチ）
- ユーザーとの対話を通じて段階的に進行
- 詳細な質問と選択肢の提示
- 各ステップでのユーザーフィードバック反映
- 理由説明と代替案の提示
- 柔軟な進行パスとカスタマイズ
- 学習機会の提供（なぜその選択が良いのかの説明）
- ユースケース：より詳細な制御を望むユーザー、学習目的のある場合

### 6.3 モード切替とハイブリッド運用
- 作業途中でのモード切替機能
- ユーザーの熟練度や要件に応じた推奨モードの提案
- モード別の進行速度とユーザー介入頻度の調整
- 機能領域ごとのデフォルトモード設定

## 7. 拡張・保守設計（エンタープライズレベル対応）

### 7.1 モジュール化とレイヤー分離
- レイヤードアーキテクチャを採用し、プレゼンテーション層、アプリケーション層、サービス層、データ層を明確に分離
- 各レイヤー間のインターフェースを厳格に定義し、内部実装の変更が他に影響しない設計
- 共通機能はコア層に集約し、重複コードを排除
- クロスカッティングコンサーンの統一的な処理（ログ、認証、例外処理など）

### 7.2 設定管理システム
- 仕事の種類や質問内容は複数の設定ファイルに分割して管理
- 機能カテゴリごとに設定ファイルをグループ化し、大規模時の競合を緩和
- 設定のバージョン管理と履歴追跡の仕組み
- 環境別（開発・テスト・ステージング・本番）設定の分離と制御

### 7.3 マイクロサービスアーキテクチャ（オプション）
- 機能単位で独立したマイクロサービスに分割可能な設計
- サービス間通信のための標準インターフェース（REST/gRPC）
- サービスディスカバリとロードバランシング
- 障害対応のためのサーキットブレーカーパターン実装

### 7.4 プラグイン・拡張機能システム
- 新しい仕事種類はプラグインとして実装可能なインターフェース設計
- ホットプラグ対応：システム再起動不要で新機能追加可能
- 拡張機能ごとのサンドボックス化と安全なリソース制限
- 拡張ポイントの明確な文書化とバージョン互換性管理

### 7.5 データベース設計
- スキーママイグレーション管理による段階的なデータ構造更新
- シャーディングとレプリケーション対応を考慮したデータモデル設計
- 監査ログとイベント履歴の自動記録
- 大規模データセット向けパフォーマンス最適化

### 7.6 開発プロセス支援
- 自動テスト（単体・結合・E2E）の充実による品質保証
- CI/CDパイプラインによる継続的なビルド・テスト・デプロイ
- コード品質チェック、セキュリティスキャンの自動化
- ブランチ戦略とマージポリシーの明確化

### 7.7 運用監視体制
- 分散トレーシングによるリクエストフロー可視化
- リアルタイムメトリクス収集と異常検知
- 自動アラート通知システム
- 障害復旧手順の自動化

### 7.8 スケーラビリティ対策
- 水平スケーリングを前提とした設計
- ステートレスアーキテクチャとセッション外部化
- キャッシュ階層化による負荷分散
- 段階的負荷テストとキャパシティプランニング

### 7.9 ドキュメント管理
- 各コンポーネントの設計意図、インターフェース、責務を明確に文書化
- APIドキュメントの自動生成
- 開発チームのナレッジベース整備
- 障害対応・運用手順のプレイブック化

## 8. 画面遷移図（テキストイメージ）
1. トップ画面
   ↓
2. 目的選択画面
   ↓
3. 入力画面
   ↓
4. プレビュー・修正画面
   ↓
5. 出力・保存画面

---

この仕様書を読めば、誰でも同じシステムを作れるように内容を丁寧に説明しています。
